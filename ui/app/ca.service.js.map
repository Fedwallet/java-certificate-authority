{"version":3,"sources":["ca.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;YAQA;gBACE,mBAAqB,IAAU;oBAAV,SAAI,GAAJ,IAAI,CAAM;oBAEvB,WAAM,GAAG,6BAA6B,CAAC;gBAFb,CAAC;gBAInC,0BAAM,GAAN;oBACE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;yBAChB,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;yBACrB,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC3C,CAAC;gBAED,yBAAK,GAAL,UAAO,OAAkB;oBACvB,IAAI,OAAO,GAAG,IAAI,cAAO,CAAC,EAAE,cAAc,EAAE,kBAAkB,EAAE,CAAC,CAAC;oBAClE,IAAI,OAAO,GAAG,IAAI,qBAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;oBACvD,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;oBAEnC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC;yBAChC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;yBACrB,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC3C,CAAC;gBAEO,+BAAW,GAAnB,UAAoB,GAAa;oBAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;wBAC1C,MAAM,IAAI,KAAK,CAAC,uBAAuB,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;oBACxD,CAAC;oBACD,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;gBAC1B,CAAC;gBAEO,+BAAW,GAAnB,UAAqB,KAAU;oBAC7B,IAAI,MAAM,GAAG,KAAK,CAAC,OAAO,IAAI,cAAc,CAAC;oBAC7C,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBACtB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAClC,CAAC;gBAjCH;oBAAC,iBAAU,EAAE;;6BAAA;gBAkCb,gBAAC;YAAD,CAjCA,AAiCC,IAAA;YAjCD,iCAiCC,CAAA","file":"ca.service.js","sourcesContent":["import { Injectable } from \"angular2/core\";\nimport { Http, Response, Headers, RequestOptions } from \"angular2/http\";\nimport { Observable } from \"rxjs/Observable\";\n\nimport { Authority } from \"./authority\";\nimport { DnBuilder } from \"./dn-builder\";\n\n@Injectable()\nexport class CaService {\n  constructor (private http: Http) {}\n\n  private _caUrl = \"/api/certificateAuthorities\";\n\n  getCas(): Observable<Authority[]> {\n    return this.http.get(this._caUrl)\n                    .map(this.extractData)\n                    .catch(this.handleError);\n  }\n\n  addCa (subject: DnBuilder): Observable<Authority>  {\n    let headers = new Headers({ \"Content-Type\": \"application/json\" });\n    let options = new RequestOptions({ headers: headers });\n    let data = JSON.stringify(subject);\n\n    return this.http.post(this._caUrl, data, options)\n                    .map(this.extractData)\n                    .catch(this.handleError);\n  }\n\n  private extractData(res: Response) {\n    if (res.status < 200 || res.status >= 300) {\n      throw new Error(\"Bad response status: \" + res.status);\n    }\n    return res.json() || [];\n  }\n\n  private handleError (error: any) {\n    let errMsg = error.message || \"Server error\";\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n}\n"]}